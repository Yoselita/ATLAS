# Code for reproducibility of the ATLAS-dataset for the Interactive Atlas

This repository contains all the code needed to generate the intermediate dataset (ATLAS-dataset) used in the Interactive Atlas (November 2020 version). For simplicity, the full workflow is split up in four main scripts which undertake independent tasks. In a nutshell:

* "script1_index_calculation.R" computes a number of climate indices (see the table included in the own script) from CMIP5 (and/or CMIP6) model outputs. Due to the particularities of some of the indices available, two more companion scripts are also delivered: "script1_index_calculation_SPI.R" and "script1_index_calculation_bias_corrected.R". Whereas the former is thought for SPI6 and SPI12, the latter should be used for those indices which are based on absolute thresholds (e.g. TX35 or TX40).
* "script2_interpolation.R" interpolates the outputs (NetCDF files) produced by "script1_index_calculation.R" using the Conservative Remapping approach used in EURO-CORDEX. The folder called *bash-interpolation-scripts* contains some bash scripts which are required by "script2_interpolation.R".
* "script3_ensemble_building.R" creates a multi-model ensemble building on the interpolated information generated by "script2_interpolation.R", returning NcML files.
* "script4_map_figures.R" generates the final figures (maps) from the NcMLs returned by "script3_ensemble_building.R".

Please be aware that these four scripts must be run in the above order. All of them build upon the [climate4R framework](https://github.com/SantanderMetGroup/climate4R).
